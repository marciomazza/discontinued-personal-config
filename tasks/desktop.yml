---
- name: desktop - common programs
  apt:
    pkg: "{{ item }}"
  become: true
  with_items:

    # general desktop apps
    - vlc
    - gimp
    - imagemagick
    - chromium-browser
    - unity-tweak-tool
    - gnome-tweak-tool
    - audacity
    - mplayer
    - redshift
    - redshift-gtk

    # for banco do brasil
    - openjdk-8-jre
    - icedtea-8-plugin

    # database visual clients
    - mysql-workbench
    - pgadmin3


- name: desktop - turn off wi-fi when on wired network connection
  file:
    src: "{{ files }}/99-wlan"
    dest: "/etc/NetworkManager/dispatcher.d/99-wlan"
    state: link
    force: yes
    owner: root
  become: true


- name: desktop -- dconf customizations
  command: dconf write {{ item }}
  with_items:
  # disable show hud on Alt
  - /org/compiz/integrated/show-hud '[""]'
  # workspaces 2x2
  - /org/compiz/profiles/unity/plugins/core/hsize 2
  - /org/compiz/profiles/unity/plugins/core/vsize 2
  # Caps => another Ctrl, 2 shifts => caps on, one shift => caps off, right alt is compose (mainly to write ÃŸ)
  - /org/gnome/desktop/input-sources/xkb-options "['caps:ctrl_modifier', 'shift:both_capslock_cancel', 'compose:ralt']"
  # auto hide launcher
  - /org/compiz/profiles/unity/plugins/unityshell/launcher-hide-mode 1
  # transparent upper panel
  - /org/compiz/profiles/unity/plugins/unityshell/panel-opacity 0.0
  # disable Integration Prompts
  - /com/canonical/unity/webapps/preauthorized-domains "@as []"
  - /com/canonical/unity/webapps/integration-allowed "false"
  # disable Search online sources
  - /com/canonical/unity/lenses/remote-content-search "'none'"
  # show date on clock widget
  - /com/canonical/indicator/datetime/show-date "true"
  # laucher favorites
  - /com/canonical/unity/launcher/favorites "['application://firefox.desktop', 'application://org.gnome.Nautilus.desktop', 'application://google-chrome.desktop', 'unity://running-apps', 'unity://expo-icon', 'unity://devices']"
  # use list view by default in nautilus
  - /org/gnome/nautilus/preferences/default-folder-viewer "'list-view'"

- name: desktop -- get ubuntu release codename
  shell: lsb_release -cs
  register: ubuntu_codename

- name: desktop -- add brightness indicator apt repo
  apt_repository: repo="{{ item }}"
  with_items:
  - "deb http://ppa.launchpad.net/indicator-brightness/ppa/ubuntu {{ ubuntu_codename.stdout }} main"
  - "deb-src http://ppa.launchpad.net/indicator-brightness/ppa/ubuntu {{ ubuntu_codename.stdout }} main"
  become: true

- name: desktop -- brightness indicator
  apt: name=indicator-brightness allow_unauthenticated=yes
  become: true
